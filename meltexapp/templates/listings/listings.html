{% extends "master.html" %}
{% block content %}
{% include "nav.html" %}
{% if values %}
<form action="/listings" method="get" onsubmit="setFormStore()">
  <label for="ac_id">Asset Class: </label>
  <select id="ac_id" name="ac_id">
    {% for ac in ac_options %}
    <option value="{{ac.id}}">{{ac.name}}</option>
    {% endfor %}
    <option value="all">All</option>
  </select>
  <input type="submit" value="OK">
</form>
<ul>
  <table table class="table table-striped">
    <colgroup>
      {% for header in headers %}
      <col>
      {% endfor %}
    </colgroup>
    <tr>
      {% for header in headers %}
      <th>{{header}}</th>
      {% endfor %}
    </tr>
    {% for id, values in values %}
    <tr>
      {%for value in values%}
      <td>{{value}}</td>
      {% endfor %}
      {% if page == "my_listings" %}
      <td>
        <a href="/listings/{{id}}">

          <botton class="btn btn-outline-primary" href="">Update</botton>
        </a>
      </td>
      {% endif %}
    </tr>
    {% endfor %}
  </table>
  {% else %}
  <p>No values are available.</p>
  {% endif %}
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script>
    function setFormStore() {
      localStorage.setItem("selected_ac", document.getElementById('ac_id').value);
    };
    $(document).ready(function () {
      if ($('#ac_id').length) {
        $('#ac_id').val(localStorage.getItem("selected_ac"));
      }
      else { $('#ac_id').val("all") }
    });
    window.onload = clearStorage
    function clearStorage() {
      if (!("{{params_present}}" === "true")) {
        localStorage.clear()
      }
    }
  </script>
  {% endblock %}
